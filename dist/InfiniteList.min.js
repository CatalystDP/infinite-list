!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.InfiniteList=t():e.InfiniteList=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r=n(2),i=n(3),o=n(5),f=n(6),a=n(4);DEFAULT_ITEM_HEIGHT=2;var l=function(e){function t(e,t){return y=e,m(e),T=new i(E),H=new f(e,x,v,h),w=new r(y,function(e){O=e||0,M=!0},t),w.setDimensions(Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),window.addEventListener("resize",s.bind(this)),l(),s(),this}function n(){o.stopAnimationLoop(),y.removeChild(E),window.removeEventListener("resize",s.bind(this))}function l(){o.startAnimationLoop(function(){M&&g()})}function u(e){if(v.itemHeightGetter)for(var t=e||0;t<=v.itemsCount;++t)R[t]=v.itemHeightGetter(t)}function m(e){x=document.createElement("div"),a.applyElementStyle(x,{position:"absolute",top:0,bottom:0}),E=document.createElement("div"),a.applyElementStyle(E,{position:"relative",height:e.clientHeight+"px",width:e.clientWidth+"px",overflow:"hidden"}),E.appendChild(x),e.appendChild(E)}function s(){var e=H.getRenderedItems()[0],t=e&&e.getItemIndex()||0,n=e&&e.getItemOffset()||0,r=O-n;I=y.clientHeight,a.applyElementStyle(E,{height:y.clientHeight+"px",width:y.clientWidth+"px"}),H.refresh(),u(),T.refresh(),d(t,!1,r)}function p(){var e=v.itemsCount-1+(v.hasMore?1:0),t=H.getRenderedItems(),n=t[t.length-1],r=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER;t.length>0&&0==t[0].getItemIndex()&&(r=t[0].getItemOffset()),n&&n.getItemIndex()==e&&(i=n.getItemOffset()+n.getItemHeight()-I),w.setDimensions(r,i)}function g(){var e;p(),a.applyTransformStyle(x,"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,"+-O+", 0, 1)"),M=H.render(O,L,b),e=H.getRenderedItems(),L=null,b=null,e.forEach(function(e){R[e.getItemIndex()]=e.getItemHeight()});for(var t=0,n=0,r=0;r<R.length;++r)"number"==typeof R[r]&&(t+=R[r],n++);t/=n,T.render(t*e[0].getItemIndex()+O-e[0].getItemOffset(),t*v.itemsCount)}function h(){v.pageFetcher(v.itemsCount,function(e,t){v.hasMore=t,v.itemsCount+=e,u(v.itemsCount-e),w.scrollTo(H.getRenderedItems()[H.getRenderedItems().length-1].getItemOffset()-I)})}function d(e,t,n){var r=0;if(v.itemHeightGetter)for(var i=0;i<e;++i)r+=v.itemHeightGetter(i);else L=e;b=n||0,w.scrollTo(r,v.itemHeightGetter&&t)}function c(e){var t=H.getRenderedItems(),n=t.filter(function(t){return t.getItemIndex()==e})[0];if(n){var r=v.itemHeightGetter&&v.itemHeightGetter(e);n.getItemOffset();r||(r=n.getDomElement().clientHeight),n.setItemHeight(r);var i=n.getItemIndex()-t[0].getItemIndex(),o=t[i+1];if(n.getItemOffset()<O)for(;o&&n;)n.setItemOffset(o.getItemOffset()-n.getItemHeight()),o=n,n=t[--i];else for(;o&&n;)o.setItemOffset(n.getItemOffset()+n.getItemHeight()),n=o,o=t[++i+1]}}var I,v={itemHeightGetter:null,itemRenderer:null,itemTypeGetter:null,pageFetcher:null,loadMoreRenderer:function(e,t){t.innerHTML='<div style="margin-left:14px;height:50px">Loading...</div>'},hasMore:!1,pullToRefresh:{height:null,idleRenderer:null,busyRenderer:null,beginRefreshAtOffset:null,onRefresh:null},itemsCount:0},y=null,E=null,x=null,T=null,H=null,w=null,R=[],O=0,L=0,b=0,M=!0;for(var D in e)e.hasOwnProperty(D)&&(v[D]=e[D]);var S=e.initialPage;return S&&(v.itemsCount=S.itemsCount||0,v.hasMore=S.hasMore||!1),{attach:t,detach:n,scrollToItem:d,refresh:s,refreshItemHeight:c}};e.exports=l},function(e,t){var n=525,r=function(e,t){function r(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function i(e){x=e,t(e)}function o(){var e,t,r;if(v)if(e=Date.now()-g,t=v*Math.exp(-e/n),r=T-t,r<h){if(T-t>=h-2)return void i(h);f(!0)}else if(r>d){if(T-t<=d+2)return void i(d);f(!1)}else t>2||t<-2?(i(T-t),requestAnimationFrame(o)):i(T)}function f(e){var t=e?h:d,r=e&&v>0||!e&&v<0;if(0!=v){var o=Date.now()-g,a=v*Math.exp(-o/(T==t?125:n));if(r&&Math.abs(a)<2)return void i(e?h:d);i(T-a),r?T!=t&&(T=t,v=T-x,g=new Date):(T=t-.1*(t-T),v=T-x),requestAnimationFrame(function(){f(e)})}}function a(e){y=!0,E=r(e),I=v=0,c=x,g=Date.now(),u(e),e.stopPropagation()}function l(e){var t,n,o=x<h||x>d?.5:1;y&&(u(e),t=r(e),n=E-t,(n>2||n<-2)&&(E=t,i(x+n*o))),e.preventDefault(),e.stopPropagation()}function u(e){var t=e.touches||[{pageX:e.pageX,pageY:e.pageY}],n=e.timeStamp,r=t[0].pageY;2===t.length&&(r=Math.abs(t[0].pageY+t[1].pageY)/2),H.push({offset:r,timestamp:n}),H.length>60&&H.splice(0,30)}function m(e){y=!1;for(var t=H.length-1,n=t-1,r=t-1;r>0&&H[r].timestamp>H[t].timestamp-100;r-=1)n=r;var i=H[t].timestamp-H[n].timestamp,f=H[t].offset-H[n].offset,a=-1e3*f/(1+i);I=.8*a+.2*I,v=1*I,T=Math.round(x+v),g=Date.now(),requestAnimationFrame(o),e.stopPropagation()}function s(e,t){var n=4e3;t?(e-x>n?x=e-n:x-e>n&&(x=e+n),v=e-x,T=e,g=Date.now(),requestAnimationFrame(o)):(v=0,i(e))}function p(e,t){h=e,d=t}var g=0,h=0,d=0,c=0,I=0,v=0,y=0,E=0,x=0,T=0,H=[];return e.addEventListener("touchstart",a),e.addEventListener("touchmove",l),e.addEventListener("touchend",m),e.addEventListener("mousedown",a),e.addEventListener("mousemove",l),e.addEventListener("mouseup",m),{setDimensions:p,scrollTo:s}};e.exports=r},function(e,t,n){var r=n(4),i=function(e){function t(t,n){var f=(e.parentElement,Math.max(10,Math.floor(o/n*o))),a=Math.floor(t/(n-o)*(o-f)),l=f+"px";r.applyElementStyle(i,{height:l}),r.applyTransformStyle(i,"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,"+a+", 0, 1)")}function n(){o=e.parentElement.clientHeight}var i=document.createElement("div"),o=e.parentElement.clientHeight;return r.applyElementStyle(i,{position:"absolute",top:"0px",right:"0px",marginRight:"3px",opacity:.3,width:"5px",backgroundColor:"#333"}),e.appendChild(i),{render:t,refresh:n}};e.exports=i},function(e,t){var n=function(e,t){Object.keys(t).forEach(function(n){e.style[n]!=t[n]&&(e.style[n]=t[n])})},r=function(e,t){var r={};["webkit","Moz","O","ms"].forEach(function(e){r[e+"Transform"]=t}),n(e,r)};e.exports={applyElementStyle:n,applyTransformStyle:r}},function(e,t){function n(e){var t=(new Date).getTime(),n=0;f=!0;var r=function(){var i=(new Date).getTime();n++,i-t>200&&(o=Math.min(60,1e3*n/(i-t)),t=i,n=0),e(),f&&requestAnimationFrame(r)};requestAnimationFrame(r)}function r(){f=!1}function i(){return o}var o=60,f=!1;e.exports={startAnimationLoop:n,stopAnimationLoop:r,getFPS:i}},function(e,t,n){var r=n(7),i=n(8),o=n(4),f=(n(5),30),a=1e3/f,l=function(e,t,n,f){function l(e,t,r){var i=(new Date).getTime();if("number"==typeof t&&t>=0){for(;x.length>0;)T.addLayer(x.pop());var o=s(t);o.setItemOffset(e-(r||0)),x.push(o)}for(var f=x[0],g=x[x.length-1];f&&f.getItemOffset()>e&&f.getItemIndex()>0;)if(f=u(f),(new Date).getTime()-i>a)return!0;if(0==f.getItemIndex()&&p(e,f.getItemOffset()),g.getItemIndex()<n.itemsCount&&"$LoadMore"==g.getIdentifier()){var h=g.getItemIndex();if(T.addLayer(x.pop()),!(x.length>0))return l(e,h);g=x[x.length-1]}for(;g&&g.getItemOffset()+g.getItemHeight()<e+y&&g.getItemIndex()<n.itemsCount;)if(g=m(g),(new Date).getTime()-i>a)return!0;for(;x.length>1&&f&&f.getItemOffset()+f.getItemHeight()<e;)T.addLayer(x.shift()),f=x[0];for(;x.length>1&&g&&g.getItemOffset()>e+y;)T.addLayer(x.pop()),g=x[x.length-1];return!1}function u(e){var t=s(e.getItemIndex()-1);return t&&(t.setItemOffset(e.getItemOffset()-t.getItemHeight()),x.unshift(t)),t}function m(e){var t=s(e.getItemIndex()+1);return t&&(t.setItemOffset(e.getItemOffset()+e.getItemHeight()),x.push(t)),t}function s(e){if(e==n.itemsCount)return n.hasMore?c():null;var t=n.itemTypeGetter?n.itemTypeGetter(e):"",r=n.itemHeightGetter&&n.itemHeightGetter(e),i=d(e,t,r);return n.itemRenderer(e,i.getDomElement()),i}function p(e,t){if(!w&&n.pullToRefresh&&n.pullToRefresh.height){var r=n.pullToRefresh,i=r.height,o=r.idleRenderer,f=r.busyRenderer,a=r.beginRefreshAtOffset,l=r.onRefresh;if(!H){var u="$pullToRefresh$";H=d(-1,u,i)}if(e<t){var m=t-e;m<(a||i)?o(H.getDomElement()):(f(H.getDomElement()),g(i),l(h)),H.setItemOffset(t-i)}}}function g(e){w=!0,n.pullToRefresh.stayInView&&o.applyElementStyle(t,{top:e+"px",transition:"top 1s"})}function h(){w=!1,o.applyElementStyle(t,{transition:"top 1s",top:0})}function d(e,i,o){var f=i||(n.itemTypeGetter?n.itemTypeGetter(e):""),a=T.borrowLayerWithIdentifier(f);null==a&&(a=new r(t));var l=o||n.itemHeightGetter&&n.itemHeightGetter(e);return a.attach(e,E-9,l,f),a}function c(){if(0==x.length||"$LoadMore"!=x[x.length-1].getIdentifier()){var e=d(n.itemsCount,"$LoadMore");return n.loadMoreRenderer(n.itemsCount,e.getDomElement()),f(),e}return x[x.length-1]}function I(){y=e.clientHeight,E=e.clientWidth,x.forEach(function(e){T.addLayer(e,!0)}),x=[]}function v(){return x}var y=e.clientHeight,E=e.clientWidth,x=[],T=new i,H=null,w=!1;return n.pullToRefresh&&p(),{render:l,refresh:I,getRenderedItems:v}};e.exports=l},function(e,t,n){var r=n(4),i=function(e){function t(e,t,n,i){return h=e,d=n,r.applyElementStyle(s,{width:t+"px",height:n+"px",overflow:"hidden"}),d=n,p=i,this}function n(){return h}function i(){return s}function o(){return p}function f(){return g}function a(e){r.applyTransformStyle(s,"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,"+e+", 0, 1)"),g=e}function l(){return d||(d=i().clientHeight)}function u(e){d=e}function m(){var e=document.createElement("div");return r.applyElementStyle(e,{position:"absolute",top:0,left:0}),e}var s=null,p="",g=-1,h=-1,d=0;return s=m(),e.appendChild(s),{attach:t,getItemIndex:n,getDomElement:i,getItemOffset:f,setItemOffset:a,getItemHeight:l,setItemHeight:u,getIdentifier:o}};e.exports=i},function(e,t,n){var r=n(4),i=function(){function e(e,t){var i=e.getIdentifier();null==n[i]&&(n[i]=[]),n[i].push(e),e.setItemOffset(-1e4),r.applyElementStyle(e.getDomElement(),{display:"none"}),t&&r.applyElementStyle(e.getDomElement(),{display:"none"})}function t(e){if(null==n[e])return null;var t=n[e].pop();return null!=t&&r.applyElementStyle(t.getDomElement(),{display:"block"}),t}var n={};return{addLayer:e,borrowLayerWithIdentifier:t}};e.exports=i}])});