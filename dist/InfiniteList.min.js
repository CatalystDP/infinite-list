!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.InfiniteList=t():e.InfiniteList=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r=n(2),i=n(3),o=n(5),f=n(6),a=n(4);DEFAULT_ITEM_HEIGHT=2;var u=function(e){function t(e,t){return y=e,l(e),T=new i(x),H=new f(e,E,v,h),w=new r(y,function(e){O=e||0,D=!0},t),w.setDimensions(Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),window.addEventListener("resize",s.bind(this)),u(),s(),this}function n(){o.stopAnimationLoop(),y.removeChild(x),window.removeEventListener("resize",s.bind(this))}function u(){o.startAnimationLoop(function(){D&&p()})}function m(e){if(v.itemHeightGetter)for(var t=e||0;t<=v.itemsCount;++t)L[t]=v.itemHeightGetter(t)}function l(e){E=document.createElement("div"),a.applyElementStyle(E,{position:"absolute",top:0,bottom:0}),x=document.createElement("div"),a.applyElementStyle(x,{position:"relative",height:e.clientHeight+"px",width:e.clientWidth+"px",overflow:"hidden"}),x.appendChild(E),e.appendChild(x)}function s(){var e=H.getRenderedItems()[0],t=e&&e.getItemIndex()||0,n=e&&e.getItemOffset()||0,r=O-n;I=y.clientHeight,a.applyElementStyle(x,{height:y.clientHeight+"px",width:y.clientWidth+"px"}),H.refresh(),m(),T.refresh(),d(t,!1,r)}function g(){var e=v.itemsCount-1+(v.hasMore?1:0),t=H.getRenderedItems(),n=t[t.length-1],r=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER;t.length>0&&0==t[0].getItemIndex()&&(r=t[0].getItemOffset()),n&&n.getItemIndex()==e&&(i=n.getItemOffset()+n.getItemHeight()-I),w.setDimensions(r,i)}function p(){var e;g(),a.applyTransformStyle(E,"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,"+-O+", 0, 1)"),D=H.render(O,M,R),e=H.getRenderedItems(),M=null,R=null,e.forEach(function(e){L[e.getItemIndex()]=e.getItemHeight()});for(var t=0,n=0,r=0;r<L.length;++r)"number"==typeof L[r]&&(t+=L[r],n++);t/=n,T.render(t*e[0].getItemIndex()+O-e[0].getItemOffset(),t*v.itemsCount)}function h(){v.pageFetcher(v.itemsCount,function(e,t){v.hasMore=t,v.itemsCount+=e,m(v.itemsCount-e),w.scrollTo(H.getRenderedItems()[H.getRenderedItems().length-1].getItemOffset()-I)})}function d(e,t,n){var r=0;if(v.itemHeightGetter)for(var i=0;i<e;++i)r+=v.itemHeightGetter(i);else M=e;R=n||0,w.scrollTo(r,v.itemHeightGetter&&t)}function c(e){var t=H.getRenderedItems(),n=t.filter(function(t){return t.getItemIndex()==e})[0];if(n){var r=v.itemHeightGetter&&v.itemHeightGetter(e);n.getItemOffset();r||(r=n.getDomElement().clientHeight),n.setItemHeight(r);var i=n.getItemIndex()-t[0].getItemIndex(),o=t[i+1];if(n.getItemOffset()<O)for(;o&&n;)n.setItemOffset(o.getItemOffset()-n.getItemHeight()),o=n,n=t[--i];else for(;o&&n;)o.setItemOffset(n.getItemOffset()+n.getItemHeight()),n=o,o=t[++i+1]}}var I,v={itemHeightGetter:null,itemRenderer:null,itemTypeGetter:null,pageFetcher:null,loadMoreRenderer:function(e,t){t.innerHTML='<div style="margin-left:14px;height:50px">Loading...</div>'},hasMore:!1,pullToRefresh:{height:null,renderer:null},itemsCount:0},y=null,x=null,E=null,T=null,H=null,w=null,L=[],O=0,M=0,R=0,D=!0;for(var b in e)e.hasOwnProperty(b)&&(v[b]=e[b]);var G=e.initialPage;return G&&(v.itemsCount=G.itemsCount||0,v.hasMore=G.hasMore||!1),{attach:t,detach:n,scrollToItem:d,refresh:s,refreshItemHeight:c}};e.exports=u},function(e,t){var n=525,r=function(e,t){function r(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function i(e){E=e,t(e)}function o(){var e,t,r;if(v)if(e=Date.now()-p,t=v*Math.exp(-e/n),r=T-t,r<h){if(T-t>=h-2)return void i(h);f(!0)}else if(r>d){if(T-t<=d+2)return void i(d);f(!1)}else t>2||t<-2?(i(T-t),requestAnimationFrame(o)):i(T)}function f(e){var t=e?h:d,r=e&&v>0||!e&&v<0;if(0!=v){var o=Date.now()-p,a=v*Math.exp(-o/(T==t?125:n));if(r&&Math.abs(a)<2)return void i(e?h:d);i(T-a),r?T!=t&&(T=t,v=T-E,p=new Date):(T=t-.1*(t-T),v=T-E),requestAnimationFrame(function(){f(e)})}}function a(e){y=!0,x=r(e),I=v=0,c=E,p=Date.now(),m(e),e.stopPropagation()}function u(e){var t,n,o=E<h||E>d?.5:1;y&&(m(e),t=r(e),n=x-t,(n>2||n<-2)&&(x=t,i(E+n*o))),e.preventDefault(),e.stopPropagation()}function m(e){var t=e.touches||[{pageX:e.pageX,pageY:e.pageY}],n=e.timeStamp,r=t[0].pageY;2===t.length&&(r=Math.abs(t[0].pageY+t[1].pageY)/2),H.push({offset:r,timestamp:n}),H.length>60&&H.splice(0,30)}function l(e){y=!1;for(var t=H.length-1,n=t-1,r=t-1;r>0&&H[r].timestamp>H[t].timestamp-100;r-=1)n=r;var i=H[t].timestamp-H[n].timestamp,f=H[t].offset-H[n].offset,a=-1e3*f/(1+i);I=.8*a+.2*I,v=1*I,T=Math.round(E+v),p=Date.now(),requestAnimationFrame(o),e.stopPropagation()}function s(e,t){var n=4e3;t?(e-E>n?E=e-n:E-e>n&&(E=e+n),v=e-E,T=e,p=Date.now(),requestAnimationFrame(o)):(v=0,i(e))}function g(e,t){h=e,d=t}var p=0,h=0,d=0,c=0,I=0,v=0,y=0,x=0,E=0,T=0,H=[];return e.addEventListener("touchstart",a),e.addEventListener("touchmove",u),e.addEventListener("touchend",l),e.addEventListener("mousedown",a),e.addEventListener("mousemove",u),e.addEventListener("mouseup",l),{setDimensions:g,scrollTo:s}};e.exports=r},function(e,t,n){var r=n(4),i=function(e){function t(t,n){var f=(e.parentElement,Math.max(10,Math.floor(o/n*o))),a=Math.floor(t/(n-o)*(o-f)),u=f+"px";r.applyElementStyle(i,{height:u}),r.applyTransformStyle(i,"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,"+a+", 0, 1)")}function n(){o=e.parentElement.clientHeight}var i=document.createElement("div"),o=e.parentElement.clientHeight;return r.applyElementStyle(i,{position:"absolute",top:"0px",right:"0px",marginRight:"3px",opacity:.3,width:"5px",backgroundColor:"#333"}),e.appendChild(i),{render:t,refresh:n}};e.exports=i},function(e,t){var n=function(e,t){Object.keys(t).forEach(function(n){e.style[n]!=t[n]&&(e.style[n]=t[n])})},r=function(e,t){var r={};["webkit","Moz","O","ms"].forEach(function(e){r[e+"Transform"]=t}),n(e,r)};e.exports={applyElementStyle:n,applyTransformStyle:r}},function(e,t){function n(e){var t=(new Date).getTime(),n=0;f=!0;var r=function(){var i=(new Date).getTime();n++,i-t>200&&(o=Math.min(60,1e3*n/(i-t)),t=i,n=0),e(),f&&requestAnimationFrame(r)};requestAnimationFrame(r)}function r(){f=!1}function i(){return o}var o=60,f=!1;e.exports={startAnimationLoop:n,stopAnimationLoop:r,getFPS:i}},function(e,t,n){var r=n(7),i=n(8),o=(n(5),30),f=1e3/o,a=function(e,t,n,o){function a(e,t,r){var i=(new Date).getTime();if("number"==typeof t&&t>=0){for(;v.length>0;)y.addLayer(v.pop());var o=l(t);o.setItemOffset(e-(r||0)),v.push(o)}for(var g=v[0],p=v[v.length-1];g&&g.getItemOffset()>e&&g.getItemIndex()>0;)if(g=u(g),(new Date).getTime()-i>f)return!0;if(0==g.getItemIndex()&&s(e,g.getItemOffset()),p.getItemIndex()<n.itemsCount&&"$LoadMore"==p.getIdentifier()){var h=p.getItemIndex();if(y.addLayer(v.pop()),!(v.length>0))return a(e,h);p=v[v.length-1]}for(;p&&p.getItemOffset()+p.getItemHeight()<e+c&&p.getItemIndex()<n.itemsCount;)if(p=m(p),(new Date).getTime()-i>f)return!0;for(;v.length>1&&g&&g.getItemOffset()+g.getItemHeight()<e;)y.addLayer(v.shift()),g=v[0];for(;v.length>1&&p&&p.getItemOffset()>e+c;)y.addLayer(v.pop()),p=v[v.length-1];return!1}function u(e){var t=l(e.getItemIndex()-1);return t&&(t.setItemOffset(e.getItemOffset()-t.getItemHeight()),v.unshift(t)),t}function m(e){var t=l(e.getItemIndex()+1);return t&&(t.setItemOffset(e.getItemOffset()+e.getItemHeight()),v.push(t)),t}function l(e){if(e==n.itemsCount)return n.hasMore?p():null;var t=n.itemTypeGetter?n.itemTypeGetter(e):"",r=n.itemHeightGetter&&n.itemHeightGetter(e),i=g(e,t,r);return n.itemRenderer(e,i.getDomElement()),i}function s(e,t){if(n.pullToRefresh&&n.pullToRefresh.height&&n.pullToRefresh.renderer){if(!x){var r="$pullToRefresh$";x=g(-1,r,n.pullToRefresh.height)}e<t&&(n.pullToRefresh.renderer(x.getDomElement(),t-e),x.setItemOffset(t-n.pullToRefresh.height))}}function g(e,i,o){var f=i||(n.itemTypeGetter?n.itemTypeGetter(e):""),a=y.borrowLayerWithIdentifier(f);null==a&&(a=new r(t));var u=o||n.itemHeightGetter&&n.itemHeightGetter(e);return a.attach(e,I-9,u,f),a}function p(){if(0==v.length||"$LoadMore"!=v[v.length-1].getIdentifier()){var e=g(n.itemsCount,"$LoadMore");return n.loadMoreRenderer(n.itemsCount,e.getDomElement()),o(),e}return v[v.length-1]}function h(){c=e.clientHeight,I=e.clientWidth,v.forEach(function(e){y.addLayer(e,!0)}),v=[]}function d(){return v}var c=e.clientHeight,I=e.clientWidth,v=[],y=new i,x=null;return n.pullToRefresh&&s(),{render:a,refresh:h,getRenderedItems:d}};e.exports=a},function(e,t,n){var r=n(4),i=function(e){function t(e,t,n,i){return h=e,d=n,r.applyElementStyle(s,{width:t+"px",height:n+"px",overflow:"hidden"}),d=n,g=i,this}function n(){return h}function i(){return s}function o(){return g}function f(){return p}function a(e){r.applyTransformStyle(s,"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,"+e+", 0, 1)"),p=e}function u(){return d||(d=i().clientHeight)}function m(e){d=e}function l(){var e=document.createElement("div");return r.applyElementStyle(e,{position:"absolute",top:0,left:0}),e}var s=null,g="",p=-1,h=-1,d=0;return s=l(),e.appendChild(s),{attach:t,getItemIndex:n,getDomElement:i,getItemOffset:f,setItemOffset:a,getItemHeight:u,setItemHeight:m,getIdentifier:o}};e.exports=i},function(e,t,n){var r=n(4),i=function(){function e(e,t){var i=e.getIdentifier();null==n[i]&&(n[i]=[]),n[i].push(e),e.setItemOffset(-1e4),r.applyElementStyle(e.getDomElement(),{display:"none"}),t&&r.applyElementStyle(e.getDomElement(),{display:"none"})}function t(e){if(null==n[e])return null;var t=n[e].pop();return null!=t&&r.applyElementStyle(t.getDomElement(),{display:"block"}),t}var n={};return{addLayer:e,borrowLayerWithIdentifier:t}};e.exports=i}])});