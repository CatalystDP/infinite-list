<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Infinite-list by roeierez</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Infinite-list</h1>
      <h2 class="project-tagline">Infinite list in javascript that scrolls in 60fps</h2>
      <a href="https://github.com/roeierez/infinite-list" class="btn">View on GitHub</a>
      <a href="https://github.com/roeierez/infinite-list/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/roeierez/infinite-list/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="infinitelist" class="anchor" href="#infinitelist" aria-hidden="true"><span class="octicon octicon-link"></span></a>InfiniteList</h1>

<p>Browse live demos from your mobile device:</p>

<ol>
<li>
<a href="http://roeierez.github.io/infinite-list/examples/react/index.html" target="_blank">Simple list</a>.</li>
<li>
<a href="http://roeierez.github.io/infinite-list/examples/flickr/index.html" target="_blank">Variable image sizes from flickr</a>.</li>
</ol>

<p>A 60fps infinite scrollable list for mobile devices.
There are some implementation of infinite scrolling out there.
The best of them renders to the DOM only what the user sees on screen at a give time and use GPU acceleration for translating items.
These techniques are used in this implementation too, but in order to achieve smooth scrolling in a list with complex items with complex DOM, or when the user scrolls fast even on old devices they are not enough.</p>

<p>In addition this list implements the following:</p>

<ol>
<li>Recycling of Dom elements in a similar way that iOS and Android does at UITableView and RecyclerView.</li>
<li>Detect when the system is busy or the frame rate frequency is about to get lower and skip unnecessary work to enable smooth scrolling</li>
<li>Enable the user to use whatever rendering technique he likes. This gives the ability to use React, for example, to render recycled items and benefit high performance rendering of list items.</li>
</ol>

<h2>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Start</h2>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> parentElement <span class="pl-k">=</span> ...

<span class="pl-k">var</span> infiniteList <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">InfiniteList</span>(
  {
    initialPage<span class="pl-k">:</span> {
      itemsCount<span class="pl-k">:</span> <span class="pl-c1">100000</span>
    },
    <span class="pl-en">itemRenderer</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">index</span>, <span class="pl-smi">domElement</span>){
      <span class="pl-smi">domElement</span>.<span class="pl-smi">innerHTML</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Item <span class="pl-pds">"</span></span> <span class="pl-k">+</span> index;
    },

    <span class="pl-c">/**</span>
<span class="pl-c">      This methos is optional, if you know the height you should implement it, otherwise you can omit it and </span>
<span class="pl-c">      the list will query the DOM for the element height after it is rendered. This extra read height might have</span>
<span class="pl-c">      a performance penalty but for most use cases it should not be noticeable.</span>
<span class="pl-c">    **/</span>
    <span class="pl-en">itemHeightGetter</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">index</span>){
      <span class="pl-k">return</span> <span class="pl-c1">50</span>;
    }
  }
).<span class="pl-en">attach</span>(parentElement)</pre></div>

<p>The first argument to the itemRenderer is an index and the second is a domElement. The first time this element is rendered it is an empty DIV.
Later on when this item becomes invisible because of scrolling action, for example, the DIV is not destroyed but cached and recycled for later use.
The next time the item of this type is rendered the domElement might be a DIV with data of other item. This enables the user to update only the DOM elements that are changed instead of recreating the entire HTML content.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>infinite-list uses a Universal Module Definition so you can use it with both CommonJS and RequireJS.</p>

<h3>
<a id="commonjs" class="anchor" href="#commonjs" aria-hidden="true"><span class="octicon octicon-link"></span></a>CommonJS</h3>

<div class="highlight highlight-source-js"><pre><span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>infinite-list<span class="pl-pds">'</span></span>)</pre></div>

<h3>
<a id="requirejs" class="anchor" href="#requirejs" aria-hidden="true"><span class="octicon octicon-link"></span></a>RequireJS</h3>

<div class="highlight highlight-source-js"><pre><span class="pl-en">define</span>([<span class="pl-s"><span class="pl-pds">'</span>[path to list project]/dist/InfiniteList.js<span class="pl-pds">'</span></span>], <span class="pl-k">function</span>(<span class="pl-smi">list</span>){
  <span class="pl-c">//your code goes here</span>
});</pre></div>

<h3>
<a id="in-the-browser" class="anchor" href="#in-the-browser" aria-hidden="true"><span class="octicon octicon-link"></span></a>In the Browser</h3>

<p>If you need it as a standalone script that is referenced from your html file then just include <code>dist/InfiniteList.js</code> and you have it on the global scope. </p>

<h3>
<a id="in-npm" class="anchor" href="#in-npm" aria-hidden="true"><span class="octicon octicon-link"></span></a>In NPM</h3>

<pre><code>npm install infinite-list
</code></pre>

<h3>
<a id="bower" class="anchor" href="#bower" aria-hidden="true"><span class="octicon octicon-link"></span></a>bower</h3>

<pre><code>bower install infinite-list
</code></pre>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>to build the exapmles:</p>

<pre><code>  npm update
  cd examples
  webpack
</code></pre>

<p>and you have the example files under "build" directory.</p>

<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h2>

<h3>
<a id="constructor-config" class="anchor" href="#constructor-config" aria-hidden="true"><span class="octicon octicon-link"></span></a>constructor (config)</h3>

<p>Create an InfinteList. 
config has the following properties:</p>

<h4>
<a id="initialpage" class="anchor" href="#initialpage" aria-hidden="true"><span class="octicon octicon-link"></span></a>initialPage</h4>

<p>the initial page configuration, has two properties:</p>

<pre><code>1. itemsCount [Number] - The number of items in the list.
2. hasMore [Boolean] - True if we have more items to load (paging)
</code></pre>

<h4>
<a id="function-itemrendererindex-domelement" class="anchor" href="#function-itemrendererindex-domelement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Function itemRenderer(index, domElement)</h4>

<p>The renderer method to invoke when an item needs to be rendered. This method should populate the domElement with the HTML markup.</p>

<h4>
<a id="function-loadmorerendererindex-domelement" class="anchor" href="#function-loadmorerendererindex-domelement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Function loadMoreRenderer(index, domElement)</h4>

<p>The renderer method to invoke a new page is about to be fetched and loadMore component should be rendered. This method should populate the domElement with the HTML markup.</p>

<h4>
<a id="function-itemheightgetterindex" class="anchor" href="#function-itemheightgetterindex" aria-hidden="true"><span class="octicon octicon-link"></span></a>Function itemHeightGetter(index)</h4>

<p>Returns the height of an item by index</p>

<h4>
<a id="function-itemtypegetterindex" class="anchor" href="#function-itemtypegetterindex" aria-hidden="true"><span class="octicon octicon-link"></span></a>Function itemTypeGetter(index)</h4>

<p>Returns the type of an item by its index. This type is used as the key for recycling elements which means that items with the same type might share the same domElement (if they are not visible together at the same time).</p>

<h4>
<a id="function-pagefetcherfromindex-callback" class="anchor" href="#function-pagefetcherfromindex-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Function pageFetcher(fromIndex, callback)</h4>

<p>This method will be invoked when the list is scrolled to the end and 'hasMore' value is true.
The list will render "Loading...' component and wait for the call back to return.
The user should feed the callback with two parameters:</p>

<ul>
<li>pageItemsCount - the number of items loaded in this page</li>
<li>hasMore - Are there more items to be loaded or this is the last page of the list.</li>
</ul>

<h3>
<a id="scrolltoitemindex-animate" class="anchor" href="#scrolltoitemindex-animate" aria-hidden="true"><span class="octicon octicon-link"></span></a>scrollToItem(index, animate)</h3>

<p>A function that receive the index of item and scroll the list to that item position with/without animation</p>

<h3>
<a id="refresh" class="anchor" href="#refresh" aria-hidden="true"><span class="octicon octicon-link"></span></a>refresh()</h3>

<p>A function that tells the list to render again the items that are visible to the user.
This is usually used when the user has changed the data of the list and wants to refresh the UI.</p>

<h3>
<a id="refreshitemheightindex" class="anchor" href="#refreshitemheightindex" aria-hidden="true"><span class="octicon octicon-link"></span></a>refreshItemHeight(index)</h3>

<p>A function that tells the list to re-calculate the height of the item by its index.
It is usefull when the list items are changing after they are first rendered, for example when images
with unknown sizes are downloaded and rendered. In this use case you might want to call this function after the 
image has loaded and the size is known.
For an example of how to use this method you can browser for the 'flickr' example in the examples directory.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/roeierez/infinite-list">Infinite-list</a> is maintained by <a href="https://github.com/roeierez">roeierez</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
